<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>README.md</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/github.css" type="text/css" media="screen" />
<script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>
    <div class="banner">
        
        <h1>
            README.md
        </h1>
        <ul class="files">
            <li>README.md</li>
            <li>Last modified: 2021-05-14 13:48:06 -0700</li>
        </ul>
    </div>

    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<h1 id="label-plaid-ruby+rdoc-image-3Ahttps-3A-2F-2Fcircleci.com-2Fgh-2Fplaid-2Fplaid-ruby.svg-3Fstyle-3Dsvg-26circle-token-3D30ee002ac2021da5b5b5a701d45fe2888af124a5+rdoc-image-3Ahttps-3A-2F-2Fbadge.fury.io-2Frb-2Fplaid.svg">plaid-ruby <a href="https://circleci.com/gh/plaid/plaid-ruby"><img src="https://circleci.com/gh/plaid/plaid-ruby.svg?style=svg&circle-token=30ee002ac2021da5b5b5a701d45fe2888af124a5"></a> <a href="http://badge.fury.io/rb/plaid"><img src="https://badge.fury.io/rb/plaid.svg"></a></h1>

<p>:warning: After 7/12/21, this major version of the library will only
receive critical security patches. Please consider trying out our new <a
href="https://github.com/plaid/plaid-ruby/tree/14.0.0-beta-release">beta
version</a>.</p>

<p>The official Ruby bindings for the <a href="https://plaid.com/docs">Plaid
API</a>.</p>

<h2 id="label-Installation">Installation</h2>

<p>Add this line to your application&#39;s Gemfile:</p>

<pre><code>gem &#39;plaid&#39;
</code></pre>

<p>And then execute:</p>

<pre><code>$ bundle
</code></pre>

<p>Or install it yourself as:</p>

<pre><code>$ gem install plaid
</code></pre>

<p>The gem supports Ruby 2.2+ only.</p>

<h3 id="label-Versioning">Versioning</h3>

<p>Each major version of <code>plaid-ruby</code> targets a specific version of
the <a href="../classes/Plaid.html">Plaid</a> API:</p>

<p>| API version | plaid-ruby release | | ———– | —————— | | <a
href="https://plaid.com/docs/api/versioning/#2020-09-14">2020-09-14</a>
(<strong>latest</strong>) | <code>12.x.x</code> | | <a
href="https://plaid.com/docs/api/versioning/#2019-05-29">2019-05-29</a>
(<strong>latest</strong>) | <code>11.x.x</code>, <code>10.x.x</code>,
<code>9.x.x</code>, <code>8.x.x</code>, <code>7.x.x</code> | | <a
href="https://plaid.com/docs/api/versioning/#2018-05-22">2018-05-22</a> |
<code>6.x.x</code> | | <code>2017-03-08</code> | <code>5.x.x</code> |</p>

<p>For information about what has changed between versions and how to update
your integration, head to the <a
href="https://plaid.com/docs/api/versioning/">version changelog</a>.</p>

<h2 id="label-Usage">Usage</h2>

<p>This gem wraps the <a href="../classes/Plaid.html">Plaid</a> API, which is
fully described in the <a
href="https://plaid.com/docs/api">documentation</a>.</p>

<p>The RubyDoc for the gem is available <a
href="http://plaid.github.io/plaid-ruby/">here</a>.</p>

<h3 id="label-Creating+a+Plaid+client">Creating a <a href="../classes/Plaid.html">Plaid</a> client</h3>

<p>Create an instance of the client using the <code>client_id</code> and
<code>secret</code> from your <a href="../classes/Plaid.html">Plaid</a>
dashboard along with your environment of choice:</p>

<pre><code>require &#39;plaid&#39;

client = Plaid::Client.new(env: :sandbox,
                           client_id: &#39;***&#39;,
                           secret: &#39;***&#39;)
</code></pre>

<p>The <code>env</code> field is the environment which the client will be
running in. Your choices for the <code>env</code> field include:</p>
<ul><li>
<p><code>:sandbox</code> allows you to do your initial integrations tests
against preloaded data without being billed or making expensive API calls.
More information about using the API sandbox can be found on the <a
href="https://plaid.com/docs/api#sandbox">API Sandbox documentation</a>.</p>
</li><li>
<p><code>:development</code> allows you to test against both real and test
accounts without being billed. More information about <a
href="../classes/Plaid.html">Plaid</a> test accounts can be found in our <a
href="https://plaid.com/docs/api/#sandbox">API documentation</a>.</p>
</li><li>
<p><code>:production</code> is the production environment where you can launch
your production ready application and be charged for your <a
href="../classes/Plaid.html">Plaid</a> usage.</p>
</li></ul>

<h3 id="label-Tuning+Faraday">Tuning Faraday</h3>

<p>The gem uses Faraday to wrap HTTPS connections, which allows you to tune
certain params:</p>

<pre><code>client = Plaid::Client.new(env: :sandbox, client_id: &#39;***&#39;, secret: &#39;***&#39;) do |builder|
  Plaid::Client.build_default_connection(builder)

  # Increase network timeout
  builder.options[:timeout] = 60*20    # 20 minutes
end
</code></pre>

<h2 id="label-Examples">Examples</h2>

<h3 id="label-Create+a+new+link_token">Create a new link_token</h3>

<pre><code># Grab the client_user_id by searching for the current user in your database
user = User.find_by!(email: &#39;***&#39;)
client_user_id = user.id

# Create the link_token with all of your configurations
link_token_response = client.link_token.create(
  user: { client_user_id: client_user_id.to_s },
  client_name: &#39;My app&#39;,
  products: %w[auth transactions],
  country_codes: [&#39;US&#39;],
  language: &#39;en&#39;
)

# Pass the result to your client-side app to initialize Link
#  and retrieve a public_token
link_token = link_token_response.link_token
</code></pre>

<h3 id="label-Exchanging+a+Link+public_token+for+a+Plaid+access_token">Exchanging a Link public_token for a <a href="../classes/Plaid.html">Plaid</a> access_token</h3>

<p>If you have a <a href="https://github.com/plaid/link">Link</a> <code>public
token</code>, use this function to get an <code>access_token</code>:
<code>client.item.public_token.exchange(public_token)</code></p>

<p>An example of the function&#39;s usage if you have a
<code>public_token</code> in hand:</p>

<pre><code>response = client.item.public_token.exchange(public_token)
access_token = response.access_token
</code></pre>

<h3 id="label-Deleting+an+item">Deleting an item</h3>

<pre><code>require &#39;plaid&#39;

client = Plaid::Client.new(env: :sandbox,
                           client_id: &#39;***&#39;,
                           secret: &#39;***&#39;)

exchange_token_response = client.item.public_token.exchange(&#39;[Plaid Link public_token]&#39;)
access_token = exchange_token_response.access_token

# Provide the access_token for the Item you want to remove
client.item.remove(access_token)
</code></pre>

<h3 id="label-Get+paginated+transactions">Get paginated transactions</h3>

<pre><code>require &#39;plaid&#39;

client = Plaid::Client.new(env: :sandbox,
                           client_id: &#39;***&#39;,
                           secret: &#39;***&#39;)

exchange_token_response = client.item.public_token.exchange(&#39;[Plaid Link public_token]&#39;)
access_token = exchange_token_response.access_token

transaction_response = client.transactions.get(access_token, &#39;2016-07-12&#39;, &#39;2017-01-09&#39;)
transactions = transaction_response.transactions

# the transactions in the response are paginated, so make multiple calls while
# increasing the offset to retrieve all transactions
while transactions.length &lt; transaction_response[&#39;total_transactions&#39;]
  transaction_response = client.transactions.get(access_token,
                                                 &#39;2016-07-12&#39;,
                                                 &#39;2017-01-09&#39;,
                                                 offset: transactions.length)
  transactions += transaction_response.transactions
end
</code></pre>

<h3 id="label-Obtaining+Item-related+data">Obtaining Item-related data</h3>

<p>If you have an <code>access_token</code>, you can use following code to
retreive data: “`ruby require &#39;plaid&#39;</p>

<p>client = <a
href="../classes/Plaid/Client.html#method-c-new">Plaid::Client.new</a>(env:
:sandbox,  client_id: &#39;<strong><em>&#39;,  secret:
&#39;</em></strong>&#39;)</p>

<p>exchange_token_response = client.item.public_token.exchange(&#39;[Plaid
Link public_token]&#39;) access_token =
exchange_token_response.access_token</p>

<p>auth_response = client.auth.get(access_token) auth = auth_response.auth “`</p>

<h3 id="label-Create+a+Stripe+bank_account_token">Create a Stripe bank_account_token</h3>

<p>Exchange a <a href="../classes/Plaid.html">Plaid</a> Link
<code>public_token</code> for an API <code>access_token</code> and a Stripe
<code>bank_account_token</code>: “`ruby require &#39;plaid&#39;</p>

<p>client = <a
href="../classes/Plaid/Client.html#method-c-new">Plaid::Client.new</a>(env:
:sandbox,  client_id: &#39;<strong><em>&#39;,  secret:
&#39;</em></strong>&#39;)</p>

<p>exchange_token_response = client.item.public_token.exchange(&#39;[Plaid
Link public_token]&#39;) access_token =
exchange_token_response.access_token</p>

<p>stripe_response =
client.processor.stripe.bank_account_token.create(access_token,
&#39;[Account ID]&#39;) bank_account_token =
stripe_response.stripe_bank_account_token “`</p>

<p>There are also a number of other methods you can use to retrieve data:</p>
<ul><li>
<p><code>client.accounts.get(access_token, ...)</code>: accounts</p>
</li><li>
<p><code>client.accounts.balance.get(access_token, ...)</code>: real-time
balances</p>
</li><li>
<p><code>client.auth.get(access_token, ...)</code>: auth</p>
</li><li>
<p><code>client.identity.get(access_token, ...)</code>: identity</p>
</li><li>
<p><code>client.transactions.get(access_token, ...)</code>: transactions</p>
</li><li>
<p><code>client.credit_details.get(access_token, ...)</code>: credit details</p>
</li><li>
<p><code>client.investments.transactions.get(access_token, ...)</code>:
investment-account transactions</p>
</li><li>
<p><code>client.investments.holdings.get(access_token, ...)</code>:
investment-account holdings</p>
</li></ul>

<p>All of these methods return appropriate data. More information can be found
on the <a href="https://plaid.com/docs/api">API documentation</a>.</p>

<h3 id="label-Categories">Categories</h3>

<p>You can request category information:</p>

<pre><code>categories = client.categories.get             # Array of all known categories
</code></pre>

<h3 id="label-Institutions">Institutions</h3>

<p>Financial institution information is available as shown below where the
function arguments represent count and offset:</p>

<pre><code>institutions = client.institutions.get(count: 3, offset: 1)
</code></pre>

<h2 id="label-Errors">Errors</h2>

<p>Any methods making API calls will result in an exception raised unless the
response code is “200: Success” or “210: MFA Required”.</p>

<p><code>Plaid::InvalidRequestError</code> is returned when the request is
malformed and cannot be processed.</p>

<p><code>Plaid::InvalidInputError</code> is returned when all fields are
provided and are in the correct format, but the values provided are
incorrect in some way.</p>

<p><code>Plaid::RateLimitExceededError</code> returned when the request is
valid but has exceeded established rate limits.</p>

<p><code>Plaid::APIError</code> is returned during planned maintenance windows
and in response to API internal server errors.</p>

<p><code>Plaid::ItemError</code> indicates that information provided for the
Item (such as credentials or MFA) may be invalid or that the Item is not
supported on Plaid&#39;s platform.</p>

<p><code>Plaid::InstitutionError</code> is returned when there are errors for
the requested financial institution.</p>

<p>Read more about response codes and their meaning in the <a
href="https://plaid.com/docs/api">Plaid documentation</a>.</p>

<h2 id="label-Response+Objects">Response Objects</h2>

<p>Any API call returns a response object which is accessible by dot notation
(<code>response.foo.bar</code>) or Symbols and Strings as keys:
<code>response[:foo][:bar]</code> and
<code>response['foo'][&#39;bar&#39;]</code>. Expected keys for all types of
responses are defined, and any attempt to access an unknown key will cause
<code>NoMethodError</code> exception.</p>

<h2 id="label-Network+Timeout">Network Timeout</h2>

<p>A network timeout value is currently defaulted at 600 seconds = 10 minutes.
Some requests from the <a href="../classes/Plaid.html">Plaid</a> API may
take longer than others and we want to make sure that all valid requests
have a chance to complete. Adjust this value if necessary (see “Tuning
Faraday”).</p>

<h2 id="label-Contributing">Contributing</h2>

<p>Bug reports and pull requests are welcome on GitHub at <a
href="https://github.com/plaid/plaid-ruby">github.com/plaid/plaid-ruby</a>.
See also <a href="CONTRIBUTING.md">contributing guidelines</a>.</p>

<h2 id="label-License">License</h2>

<p>The gem is available as open source under the terms of the <a
href="http://opensource.org/licenses/MIT">MIT License</a>.</p>

<h3 id="label-Legacy+API">Legacy API</h3>

<p>If you&#39;re looking for a Ruby client that works with the legacy <a
href="../classes/Plaid.html">Plaid</a> API, use the <a
href="https://github.com/plaid/plaid-ruby-legacy">plaid-legacy gem</a>.</p>

    </div>
  


  


  
  


  


  

  



  

    

    

    


    


    <!-- Methods -->
    
    
    
  
</div>

    </div>
  </body>
</html>
